import{d as J,E as V,r as d,C as j,D as v,b as o,o as p,G as b,f as a,e as l,J as x,H as A,c as F,g as _,x as h,T as g,U as k,V as z}from"./vendor.8524c068.js";import{a as C}from"./index.9a374fd4.js";import{P as E}from"./index.acb3670d.js";const H=h("\u53D1\u9001"),P=h("\u79BB\u5F00"),L=J({setup(R){const{data:T,send:f,close:S}=V(C.CHAT_ROOM+C.UUID),D=E.globalToken.value,M={action:"auth",token:D};f(JSON.stringify(M));const s=d(""),u=d(!1),c=d(!1),r=j([]),B=g(()=>{if(!s.value)return;const e={action:"sendMessage",text:s.value};f(JSON.stringify(e)),u.value=!0,setTimeout(()=>{u.value=!1,s.value=""},200)},300),w=g(()=>{S(),c.value=!0},300);return v(T,e=>{if(!e)return;const{text:t,createTimestamp:i}=JSON.parse(e);if(!i||!t)return;const m={type:"success",title:"Ta",content:t,time:k(z(i),"yyyy-MM-dd hh:mm:ss")};r.push(m)}),v(u,e=>{if(!e)return;const t={type:"info",title:"\u6211",content:s.value,time:k(Date.now(),"yyyy-MM-dd hh:mm:ss")};r.push(t)}),(e,t)=>{const i=o("n-timeline-item"),m=o("n-timeline"),N=o("n-scrollbar"),O=o("n-input"),y=o("n-button"),U=o("n-space");return p(),b(x,null,[a(N,{style:{"max-height":"400px"}},{default:l(()=>[a(m,null,{default:l(()=>[(p(!0),b(x,null,A(_(r),n=>(p(),F(i,{key:n.time,type:n.type,title:n.title,content:n.content,time:n.time},null,8,["type","title","content","time"]))),128))]),_:1})]),_:1}),a(U,{style:{"margin-top":"30px"}},{default:l(()=>[a(O,{style:{width:"500px"},type:"textarea",size:"large",round:"",autosize:{minRows:3},value:s.value,"onUpdate:value":t[0]||(t[0]=n=>s.value=n),placeholder:"\u8BD5\u7740\u804A\u804A\u5929"},null,8,["value"]),a(y,{type:"primary",onClick:_(B),disabled:c.value},{default:l(()=>[H]),_:1},8,["onClick","disabled"]),a(y,{type:"primary",onClick:_(w),disabled:c.value},{default:l(()=>[P]),_:1},8,["onClick","disabled"])]),_:1})],64)}}});export{L as default};
