import{d as A,B as F,r as d,A as V,T as v,b as o,o as p,D as b,f as a,e as l,F as x,E as W,c as j,g as _,x as h,U as g,V as k,W as J}from"./vendor.4c343100.js";import{W as C}from"./index.c9a0e872.js";import{P as z}from"./index.a2c9e9dd.js";const E=h("\u53D1\u9001"),P=h("\u79BB\u5F00"),q=A({setup(R){const{data:T,send:f,close:S}=F(C.CHAT_ROOM+C.UUID),B=z.globalToken.value,D={action:"auth",token:B};f(JSON.stringify(D));const s=d(""),c=d(!1),u=d(!1),r=V([]),M=g(()=>{if(!s.value)return;const e={action:"sendMessage",text:s.value};f(JSON.stringify(e)),c.value=!0,setTimeout(()=>{c.value=!1,s.value=""},200)},300),w=g(()=>{S(),u.value=!0},300);return v(T,e=>{if(!e)return;const{text:t,createTimestamp:i}=JSON.parse(e);if(!i||!t)return;const m={type:"success",title:"Ta",content:t,time:k(J(i),"yyyy-MM-dd hh:mm:ss")};r.push(m)}),v(c,e=>{if(!e)return;const t={type:"info",title:"\u6211",content:s.value,time:k(Date.now(),"yyyy-MM-dd hh:mm:ss")};r.push(t)}),(e,t)=>{const i=o("n-timeline-item"),m=o("n-timeline"),N=o("n-scrollbar"),O=o("n-input"),y=o("n-button"),U=o("n-space");return p(),b(x,null,[a(N,{style:{"max-height":"400px"}},{default:l(()=>[a(m,null,{default:l(()=>[(p(!0),b(x,null,W(_(r),n=>(p(),j(i,{key:n.time,type:n.type,title:n.title,content:n.content,time:n.time},null,8,["type","title","content","time"]))),128))]),_:1})]),_:1}),a(U,{style:{"margin-top":"30px"}},{default:l(()=>[a(O,{style:{width:"500px"},type:"textarea",size:"large",round:"",autosize:{minRows:3},value:s.value,"onUpdate:value":t[0]||(t[0]=n=>s.value=n),placeholder:"\u8BD5\u7740\u804A\u804A\u5929"},null,8,["value"]),a(y,{type:"primary",onClick:_(M),disabled:u.value},{default:l(()=>[E]),_:1},8,["onClick","disabled"]),a(y,{type:"primary",onClick:_(w),disabled:u.value},{default:l(()=>[P]),_:1},8,["onClick","disabled"])]),_:1})],64)}}});export{q as default};
