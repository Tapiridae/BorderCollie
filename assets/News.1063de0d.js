import{u as g,b as $,r as A,c as F,d as H}from"./utils.c36a417a.js";import{_ as S}from"./plugin-vue_export-helper.5a098b48.js";import{d as P,a1 as U,r as p,w as Z,ae as q,b as r,o as d,a3 as v,f as n,e as t,Z as u,a4 as h,a5 as b,g as o,c as f,a6 as z,_ as N,$ as m}from"./vendor.57dbeffe.js";const G={class:"masonry"},J=["src"],K={class:"news-bottom"},O=["onClick"],Q=["innerHTML"],R=P({setup(W){const x=g($()).get().json(),s=U({newsTypes:[],newsList:[],details:{}}),w=p(""),C=p(""),T=p(1),j=p(""),y=p(!1);Z(()=>{const{data:a}=x;if(!a.value)return;const{data:l}=a.value;s.newsTypes=l});const I=async a=>{C.value=a;const{execute:l,data:i}=g(F(a,T.value),{immediate:!1}).get().json();await l();const{data:c}=i.value;s.newsList=c},B=async a=>{j.value=a;const{execute:l,data:i}=g(H(a),{immediate:!1}).get().json();await l();const{data:c}=i.value;s.details=c,y.value=!0};return q(()=>{w.value=A()}),(a,l)=>{const i=r("n-button"),c=r("n-space"),D=r("n-card"),k=r("n-image"),L=r("n-tag"),E=r("n-image-group"),V=r("n-drawer-content"),M=r("n-drawer");return d(),v("div",null,[n(c,null,{default:t(()=>[(d(!0),v(h,null,b(o(s).newsTypes,e=>(d(),f(i,{key:e.typeId,type:w.value,onClick:_=>I(e.typeId)},{default:t(()=>[N(m(e.typeName),1)]),_:2},1032,["type","onClick"]))),128))]),_:1}),u("div",G,[(d(!0),v(h,null,b(o(s).newsList,e=>(d(),f(D,{key:e.newsId,title:e.title,embedded:"",class:"item"},{cover:t(()=>[u("img",{src:Array.isArray(e.imgList)&&e.imgList.length>0?e.imgList[0]:""},null,8,J)]),footer:t(()=>[u("div",K,[u("span",null,m(e.source),1),u("span",null,m(e.postTime),1)])]),action:t(()=>[u("div",{class:"preview",onClick:_=>B(e.newsId)},"\u67E5\u770B\u8BE6\u60C5",8,O)]),_:2},1032,["title"]))),128))]),o(s).details?(d(),f(M,{key:0,show:y.value,"onUpdate:show":l[0]||(l[0]=e=>y.value=e),width:502,placement:"right","mask-closable":!1},{default:t(()=>[n(V,{title:o(s).details.title,style:{overflow:"hidden"},closable:"","native-scrollbar":!1},{default:t(()=>{var e;return[n(c,null,{default:t(()=>[n(k,{width:"500",src:o(s).details.cover},null,8,["src"])]),_:1}),n(c,{justify:"space-between"},{default:t(()=>[n(L,{type:w.value},{default:t(()=>[N(m(o(s).details.source),1)]),_:1},8,["type"]),n(L,{type:w.value},{default:t(()=>[N(m(o(s).details.ptime),1)]),_:1},8,["type"])]),_:1}),u("div",{innerHTML:(e=o(s).details)==null?void 0:e.content},null,8,Q),n(E,null,{default:t(()=>[n(c,null,{default:t(()=>[(d(!0),v(h,null,b(o(s).details.images,_=>(d(),f(k,{width:"100",src:_==null?void 0:_.imgSrc},null,8,["src"]))),256))]),_:1})]),_:1})]}),_:1},8,["title"])]),_:1},8,["show"])):z("",!0)])}}});var te=S(R,[["__scopeId","data-v-14d05303"]]);export{te as default};
