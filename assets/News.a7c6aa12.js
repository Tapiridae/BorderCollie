import{u as m,b as S,r as A,c as F,d as V}from"./utils.62048447.js";import{_ as $}from"./plugin-vue_export-helper.5a098b48.js";import{d as q,A as G,r as d,w as K,S as M,b as r,o as i,D as v,f as y,e as n,q as o,F as g,E as h,g as _,c as b,x,G as p,K as P,L as U}from"./vendor.4c343100.js";import"./index.c9a0e872.js";const z=u=>(P("data-v-cbe9a0d0"),u=u(),U(),u),H={class:"masonry"},J=["src"],O={class:"news-bottom"},Q=["onClick"],R=z(()=>o("div",null,null,-1)),W=q({setup(u){const N=m(S()).get().json(),a=G({newsTypes:[],newsList:[],details:[]}),f=d(""),I=d(""),k=d(1),L=d(""),w=d(!1);K(()=>{const{data:t}=N;if(!t.value)return;const{data:s}=t.value;a.newsTypes=s});const C=async t=>{I.value=t;const{execute:s,data:c}=m(F(t,k.value),{immediate:!1}).get().json();await s();const{data:l}=c.value;a.newsList=l},j=async t=>{L.value=t;const{execute:s,data:c}=m(V(t),{immediate:!1}).get().json();await s();const{data:l}=c.value;a.details=l,w.value=!0};return M(()=>{f.value=A()}),(t,s)=>{const c=r("n-button"),l=r("n-space"),T=r("n-card"),B=r("n-drawer-content"),D=r("n-drawer");return i(),v("div",null,[y(l,null,{default:n(()=>[(i(!0),v(g,null,h(_(a).newsTypes,e=>(i(),b(c,{key:e.typeId,type:f.value,onClick:E=>C(e.typeId)},{default:n(()=>[x(p(e.typeName),1)]),_:2},1032,["type","onClick"]))),128))]),_:1}),o("div",H,[(i(!0),v(g,null,h(_(a).newsList,e=>(i(),b(T,{key:e.newsId,title:e.title,embedded:"",class:"item"},{cover:n(()=>[o("img",{src:Array.isArray(e.imgList)&&e.imgList.length>0?e.imgList[0]:""},null,8,J)]),footer:n(()=>[o("div",O,[o("span",null,p(e.source),1),o("span",null,p(e.postTime),1)])]),action:n(()=>[o("div",{class:"preview",onClick:E=>j(e.newsId)},"\u67E5\u770B\u8BE6\u60C5",8,Q)]),_:2},1032,["title"]))),128))]),y(D,{show:w.value,"onUpdate:show":s[0]||(s[0]=e=>w.value=e),width:502,placement:"bottom"},{default:n(()=>[y(B,{title:_(a).details.title},{default:n(()=>[R,x(" "+p(_(a).details),1)]),_:1},8,["title"])]),_:1},8,["show"])])}}});var te=$(W,[["__scopeId","data-v-cbe9a0d0"]]);export{te as default};
