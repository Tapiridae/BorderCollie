import{u as y,b as $,c as A,d as F}from"./messages.150f10e8.js";import{r as H}from"./utils.c6445c74.js";import{_ as S}from"./plugin-vue_export-helper.5a098b48.js";import{d as P,a1 as U,r as p,w as Z,af as q,b as r,o as d,a3 as f,f as n,e as t,Z as i,a4 as h,a5 as b,g as o,c as v,a6 as z,_ as N,$ as m}from"./vendor.9f88f441.js";const G={class:"masonry"},J=["src"],K={class:"news-bottom"},O=["onClick"],Q=["innerHTML"],R=P({setup(W){const x=y($()).get().json(),s=U({newsTypes:[],newsList:[],details:{}}),w=p(""),C=p(""),T=p(1),j=p(""),g=p(!1);Z(()=>{const{data:a}=x;if(!a.value)return;const{data:l}=a.value;s.newsTypes=l});const I=async a=>{C.value=a;const{execute:l,data:u}=y(A(a,T.value),{immediate:!1}).get().json();await l();const{data:c}=u.value;s.newsList=c},B=async a=>{j.value=a;const{execute:l,data:u}=y(F(a),{immediate:!1}).get().json();await l();const{data:c}=u.value;s.details=c,g.value=!0};return q(()=>{w.value=H()}),(a,l)=>{const u=r("n-button"),c=r("n-space"),D=r("n-card"),k=r("n-image"),L=r("n-tag"),E=r("n-image-group"),V=r("n-drawer-content"),M=r("n-drawer");return d(),f("div",null,[n(c,null,{default:t(()=>[(d(!0),f(h,null,b(o(s).newsTypes,e=>(d(),v(u,{key:e.typeId,type:w.value,onClick:_=>I(e.typeId)},{default:t(()=>[N(m(e.typeName),1)]),_:2},1032,["type","onClick"]))),128))]),_:1}),i("div",G,[(d(!0),f(h,null,b(o(s).newsList,e=>(d(),v(D,{key:e.newsId,title:e.title,embedded:"",class:"item"},{cover:t(()=>[i("img",{src:Array.isArray(e.imgList)&&e.imgList.length>0?e.imgList[0]:""},null,8,J)]),footer:t(()=>[i("div",K,[i("span",null,m(e.source),1),i("span",null,m(e.postTime),1)])]),action:t(()=>[i("div",{class:"preview",onClick:_=>B(e.newsId)},"\u67E5\u770B\u8BE6\u60C5",8,O)]),_:2},1032,["title"]))),128))]),o(s).details?(d(),v(M,{key:0,show:g.value,"onUpdate:show":l[0]||(l[0]=e=>g.value=e),width:502,placement:"right","mask-closable":!1},{default:t(()=>[n(V,{title:o(s).details.title,style:{overflow:"hidden"},closable:"","native-scrollbar":!1},{default:t(()=>{var e;return[n(c,null,{default:t(()=>[n(k,{width:"500",src:o(s).details.cover},null,8,["src"])]),_:1}),n(c,{justify:"space-between"},{default:t(()=>[n(L,{type:w.value},{default:t(()=>[N(m(o(s).details.source),1)]),_:1},8,["type"]),n(L,{type:w.value},{default:t(()=>[N(m(o(s).details.ptime),1)]),_:1},8,["type"])]),_:1}),i("div",{innerHTML:(e=o(s).details)==null?void 0:e.content},null,8,Q),n(E,null,{default:t(()=>[n(c,null,{default:t(()=>[(d(!0),f(h,null,b(o(s).details.images,_=>(d(),v(k,{width:"100",src:_==null?void 0:_.imgSrc},null,8,["src"]))),256))]),_:1})]),_:1})]}),_:1},8,["title"])]),_:1},8,["show"])):z("",!0)])}}});var se=S(R,[["__scopeId","data-v-14d05303"]]);export{se as default};
