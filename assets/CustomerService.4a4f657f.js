import{d as U,A as j,r as d,L as F,M as v,b as o,o as p,D as b,f as a,e as l,O as x,P as J,c as P,g as _,x as h,Q as g,S as k,T as V}from"./vendor.ba8c8da5.js";import{W as C}from"./index.59c2209d.js";import{P as W}from"./index.334ed720.js";const z=h("\u53D1\u9001"),L=h("\u79BB\u5F00"),Q=U({setup(R){const{data:S,send:f,close:T}=j(C.CHAT_ROOM+C.UUID),M=W.globalToken.value,D={action:"auth",token:M};f(JSON.stringify(D));const s=d(""),u=d(!1),c=d(!1),r=F([]),B=g(()=>{if(!s.value)return;const e={action:"sendMessage",text:s.value};f(JSON.stringify(e)),u.value=!0,setTimeout(()=>{u.value=!1,s.value=""},200)},300),O=g(()=>{T(),c.value=!0},300);return v(S,e=>{if(!e)return;const{text:t,createTimestamp:i}=JSON.parse(e);if(!i||!t)return;const m={type:"success",title:"Ta",content:t,time:k(V(i),"yyyy-MM-dd hh:mm:ss")};r.push(m)}),v(u,e=>{if(!e)return;const t={type:"info",title:"\u6211",content:s.value,time:k(Date.now(),"yyyy-MM-dd hh:mm:ss")};r.push(t)}),(e,t)=>{const i=o("n-timeline-item"),m=o("n-timeline"),w=o("n-scrollbar"),N=o("n-input"),y=o("n-button"),A=o("n-space");return p(),b(x,null,[a(w,{style:{"max-height":"400px"}},{default:l(()=>[a(m,null,{default:l(()=>[(p(!0),b(x,null,J(_(r),n=>(p(),P(i,{key:n.time,type:n.type,title:n.title,content:n.content,time:n.time},null,8,["type","title","content","time"]))),128))]),_:1})]),_:1}),a(A,{style:{"margin-top":"30px"}},{default:l(()=>[a(N,{style:{width:"500px"},type:"textarea",size:"large",round:"",autosize:{minRows:3},value:s.value,"onUpdate:value":t[0]||(t[0]=n=>s.value=n),placeholder:"\u8BD5\u7740\u804A\u804A\u5929"},null,8,["value"]),a(y,{type:"primary",onClick:_(B),disabled:c.value},{default:l(()=>[z]),_:1},8,["onClick","disabled"]),a(y,{type:"primary",onClick:_(O),disabled:c.value},{default:l(()=>[L]),_:1},8,["onClick","disabled"])]),_:1})],64)}}});export{Q as default};
