import{d as N,K as B,r as d,L as D,M as _,b as o,o as m,C as f,f as a,e as r,O as y,P as O,c as W,g as b,x as J,Q as P,S as h,T as V}from"./vendor.1891959b.js";import{P as j}from"./index.9695c78e.js";class z{static get WSS(){return"wss://beta-chat-ws.keyush.cn/chat_room/"}}const A=J("\u53D1\u9001"),Q=N({setup(v){const{status:F,data:g,send:p,open:L,close:U}=B(z.WSS+"535fe8a3d9fb44e0bfc50ebbdb6b4b32"),x=j.globalToken.value,S={action:"auth",token:x};p(JSON.stringify(S));const s=d(""),u=d(!1),l=D([]),k=P(()=>{if(!s.value)return;const e={action:"sendMessage",text:s.value};p(JSON.stringify(e)),u.value=!0,setTimeout(()=>{u.value=!1,s.value=""},200)},300);return _(g,e=>{if(!e)return;const{text:t,createTimestamp:c}=JSON.parse(e);if(!c||!t)return;const i={type:"success",title:"Ta",content:t,time:h(V(c),"yyyy-MM-dd hh:mm:ss")};l.push(i)}),_(u,e=>{if(!e)return;const t={type:"info",title:"\u6211",content:s.value,time:h(Date.now(),"yyyy-MM-dd hh:mm:ss")};l.push(t)}),(e,t)=>{const c=o("n-timeline-item"),i=o("n-timeline"),T=o("n-scrollbar"),w=o("n-input"),C=o("n-button"),M=o("n-space");return m(),f(y,null,[a(T,{style:{"max-height":"400px"}},{default:r(()=>[a(i,null,{default:r(()=>[(m(!0),f(y,null,O(b(l),n=>(m(),W(c,{key:n.time,type:n.type,title:n.title,content:n.content,time:n.time},null,8,["type","title","content","time"]))),128))]),_:1})]),_:1}),a(M,{style:{"margin-top":"30px"}},{default:r(()=>[a(w,{style:{width:"500px"},type:"textarea",size:"large",round:"",autosize:{minRows:3},value:s.value,"onUpdate:value":t[0]||(t[0]=n=>s.value=n),placeholder:"\u8BD5\u7740\u804A\u804A\u5929"},null,8,["value"]),a(C,{type:"primary",onClick:b(k)},{default:r(()=>[A]),_:1},8,["onClick"])]),_:1})],64)}}});export{Q as default};
